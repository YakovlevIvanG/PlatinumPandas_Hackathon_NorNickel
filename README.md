***Хакатон Норникель - интеллектуальные горизонты. Команда PlatinumPandas***  
***Решение: Иван Яковлев***  
*Дата выполнения: 6-8 декабря 2024 года.*  
*На решение задачи было дано 42 часа.*

# Задача 1. Флотомашина времени. Решение от команды PlatinumPandas.

## Введение
**Цель работы**:  
На основании исторических данных установить диапазоны работы автомата на каждом аппарате.

**Задачи, решаемые в работе:**
1. Обработка предоставленных данных.
2. Исследовательский и корреляционный анализ данных.
3. Формирование моделей для установление диапазонов.
4. Формирование выводов по работе.

**План работы:**
1. Загрузить предоставленные данные.
2. Устранить или заполнить пропуски.
3. Выполнить исследовательский анализ данных.
4. Выполнить корреляционный анализ данных.
5. Выделить признаки для обучения и прогнозирования.
6. Сформировать модели и обучить их на исторических данных.
7. Сделать выводы по работе.

**Описание задачи и работы:**  
Организаторами Хакатона предоставлена следующая информация:
1. Датасет df_hack_final из 130 признаков, содержащий информацию о работе линии флотации действующего производства по обогащению руды.
2. Датасет с пустыми значениями, которые необходимо заполнить на основе разработанного решения.
3. Описание задания.
4. Схема установки флотации.

Формат имен признаков в датасете df_hack_final:  
- Ni_rec – извлечение никеля в готовый никелевый продукт, концентрат (значение может отсутствовать, валидны только меньше 1 и больше 0),
- Ore, oreth – имена, которые означают признаки рудного сгустителя (Ore thickener) и на входе первой ФМ (напомним, ФМ – флотомашина),
- resth – имена, которые означают признаки сгустителя с готовым никелевым продуктом (Final Ni thickener).  

Физические характеристики: Mass (масса), Dens (плотность), Vol (объём), Ni (никель), Cu (медь), A (флаг автоуправления, если оптимизатор управления ФМ включен, то равен 1 – фактические диапазоны на этой ФМ актуальны, в противном случае диапазонам не следует доверять, так как не обновлялись после выключения оптимизатора).  
Суффиксы имён ФМ (положения в цепи агрегатов): 1.1, 1.2, …, 6.2.
Суффиксы продуктов: F – питание ФМ, C – концентрат ФМ, T – хвосты ФМ.
Суффиксы границ фактических диапазонов, которые были выставлены технологом для оптимизатора ФМ: min, max.
Границы фактического диапазона в файле исходных данных – значения, которые выставляли технологи производства для сервиса оптимизации флотации (по одному на каждую линию флотомашины, например, оптимизатор для ФМ1.1.), чтобы этот оптимизатор генерировал воздействия на рычаги управления флотацией на ФМ, которые обеспечат сходимость к середине этого диапазона.  
Технологические ограничения, которым должно соответствовать решение:   
Ограничение 1. Каждый диапазон (признаки min, max) можно изменить не чаще 1 раза в 2 часа (не менее 8 15-минуток подряд с одной и той же парой значений границ).  
Ограничение 2. Наименьшие допустимые приращения признаков min, max зависят от продукта, металла и ФМ (и одинаковы для двух линий одной ФМ). В качестве приращений используйте только кратные им значения (например, если наименьшее допустимое – 0.1, используйте 0.1, 0.2, 0.3, …):


## Выводы
1. В рамках работы выполнен исследовательский и корреляционный анализ данных, а также выполнено прогнозирование диапазонов.
2. В задаче надо было предсказать 40 признаков по имеющимся 130. Прогноз был выполнено по следующей схеме:
   - предсказано 20 признаков с помощью градиентного бустинга и функции MultiOutputRegressor.
   - остальные 20 признаков рассчитаны с помощью установленной константы по историческим данным.
3. Лучшей моделью оказалась LightGBM. Однако метрика получилась невысокая. Улучшение метрики возможно более тщательной подготовкой данных и добавляем новых признаков.

